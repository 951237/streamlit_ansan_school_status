# 배포 가이드

이 문서는 안산 학교 현황판을 다양한 플랫폼에 배포하는 방법을 설명합니다.

## 1. Streamlit Cloud (권장)

### 장점
- 무료 티어 제공
- GitHub 연동 자동 배포
- 별도 서버 관리 불필요

### 배포 단계
1. https://streamlit.io/cloud 에 GitHub 계정으로 로그인
2. "New app" → 저장소 선택
3. Main file path: `app.py`
4. Deploy 클릭
5. 생성된 URL로 접속 가능

### 휴면 방지
- UptimeRobot으로 5분마다 핑 (DOC/UptimeRobot_설정가이드.md 참조)

---

## 2. Railway

### 장점
- 무료 티어: 월 $5 크레딧
- 자동 HTTPS 제공
- GitHub 자동 배포

### 배포 단계
1. https://railway.app 가입
2. "New Project" → "Deploy from GitHub repo"
3. 저장소 선택
4. Railway가 자동으로 Dockerfile 또는 Procfile 감지
5. 환경변수 설정 (필요시)
6. 배포 완료

---

## 3. Render

### 장점
- 무료 티어 제공
- Docker 지원
- 자동 배포

### 배포 단계
1. https://render.com 가입
2. "New" → "Web Service"
3. GitHub 저장소 연결
4. Build Command: (자동 감지)
5. Start Command: `streamlit run app.py --server.headless true --server.port $PORT`
6. "Create Web Service"

### 주의사항
- 무료 티어는 15분 비활동 후 휴면
- UptimeRobot으로 활성 상태 유지 가능

---

## 4. Fly.io

### 장점
- 무료 티어 제공
- 전 세계 리전 선택 가능
- Docker 기반

### 배포 단계
1. Fly CLI 설치: https://fly.io/docs/hands-on/install-flyctl/
2. 로그인:
   ```bash
   flyctl auth signup
   ```
3. 앱 생성 및 배포:
   ```bash
   flyctl launch
   flyctl deploy
   ```

---

## 5. Docker 컨테이너 (로컬 또는 서버)

### 빌드 및 실행
```bash
# 이미지 빌드
docker build -t ansan-schools .

# 컨테이너 실행
docker run -p 8501:8501 ansan-schools
```

### 접속
http://localhost:8501

---

## 환경 설정

### 필수 파일
- `requirements.txt`: Python 의존성
- `Dockerfile`: 컨테이너 이미지 정의
- `Procfile`: Railway/Render/Heroku용

### 환경 변수
현재 프로젝트는 별도 환경 변수가 필요하지 않습니다.
향후 API 키 등이 필요한 경우 플랫폼별 Secret 관리 기능 사용.

---

## 비용 비교 (2025년 기준)

| 플랫폼 | 무료 티어 | 휴면 | 트래픽 제한 |
|--------|-----------|------|-------------|
| Streamlit Cloud | ✅ | 약 7일 비활동 | 무제한 |
| Railway | $5/월 크레딧 | ❌ | 100GB/월 |
| Render | ✅ | 15분 비활동 | 100GB/월 |
| Fly.io | ✅ | ❌ | 160GB/월 |

---

## 권장 전략

1. **개발/테스트**: Streamlit Cloud (간편함)
2. **프로덕션**: Railway 또는 Fly.io (안정성)
3. **고가용성**: UptimeRobot + Streamlit Cloud 조합

---

## 문제 해결

### 앱이 시작되지 않는 경우
```bash
# 로컬에서 테스트
streamlit run app.py

# Docker로 테스트
docker build -t test-app . && docker run -p 8501:8501 test-app
```

### 의존성 오류
```bash
# requirements.txt 재생성
pip freeze > requirements.txt
```

### 포트 문제
플랫폼마다 PORT 환경 변수가 다를 수 있습니다.
Procfile과 Dockerfile에서 `$PORT` 또는 `8501` 사용 확인.
